<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAGE - 시설찾기</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/index-sidebar.css}">
</head>
<body>
<div th:replace="header :: header"></div>

<main class="facility-main">
    <div class="facility-section">
        <div class="facility-title-wrap">
            <h2 class="facility-title">시설 찾기</h2>
        </div>

        <div class="facility-map-wrap">
            <object class="facility-map-img" id="krMapObj" type="image/svg+xml" data="svg/kr_outline.svg" width="600" height="600"></object>
        </div>

        <div class="facility-region-filter center-region">
            <div class="region-row">
                <label class="region-item"><input type="checkbox" value="서울"> 서울</label>
                <label class="region-item"><input type="checkbox" value="경기도"> 경기도</label>
                <label class="region-item"><input type="checkbox" value="강원도"> 강원도</label>
                <label class="region-item"><input type="checkbox" value="경상도"> 경상도</label>
                <label class="region-item"><input type="checkbox" value="전라도"> 전라도</label>
                <label class="region-item"><input type="checkbox" value="충청도"> 충청도</label>
                <label class="region-item"><input type="checkbox" value="인천"> 인천</label>
                <label class="region-item"><input type="checkbox" value="대전"> 대전</label>
                <label class="region-item"><input type="checkbox" value="대구"> 대구</label>
                <label class="region-item"><input type="checkbox" value="울산"> 울산</label>
                <label class="region-item"><input type="checkbox" value="부산"> 부산</label>
                <label class="region-item"><input type="checkbox" value="제주도"> 제주도</label>
            </div>
        </div>
        <!-- 카테고리 수정하기! -->
        <div class="option_nav" style="">
            <div id="simpleSearchOptionpriceCompare">
                <input type="hidden" name="btnAllOptUse" id="btnAllOptUse" value="true"><input type="hidden" id="searchOptionTotalCount" value="21">
                <input type="hidden" id="researchGuideTextDisplayYN" value="Y">
                <div class="spec_list">
                    <input type="hidden" id="priceRangeMinPriceHidden">
                    <!-- 이용가능 -->
                    <dl class="spec_item">
                        <dt class="item_dt">이용가능</dt>
                        <div class="layer-prod-pdb1 layer-prod-research"></div>
                        <dd class="item_dd">
                            <ul class="item_list">
                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="이용가능" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="text__label">이용가능</span>
                                    </label>
                                </li>
                            </ul>
                        </dd>
                    </dl>

                    <!-- 프로그램 -->
                    <dl class="spec_item">
                        <dt class="item_dt">프로그램</dt>
                        <div class="layer-prod-pdb1 layer-prod-research"></div>
                        <dd class="item_dd">
                            <ul class="item_list">
                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="art">예술</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="rest">여가</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="remember">치매</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="religion">종교</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="religion">인지</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="physica">신체 활동</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="physica">치료</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="beauty">미용</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="specialization">특화</span>
                                    </label>
                                </li>

                                <li class="sub_item  " style="">
                                    <label title="use_can">
                                        <input type="checkbox" autocomplete="off" data-attribute-name="프로그램" id="use_can" name="use_can[]" value="use_can" onclick="javascript:equalCheckSearchOption(this, 'searchAttributeValue', ''); getProductList(1);">
                                        <span class="etc">기타</span>
                                    </label>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                </div>
            </div>
            <!-- 카테고리 수정하기! -->



            <div class="facility-searchbar-wrap">
                <form id="facilitySearchForm" autocomplete="off" onsubmit="return false;" style="width:100%;display:flex;justify-content:center;align-items:center;">
                    <div class="facility-searchbar">
                        <input type="text" id="facilitySearchInput" placeholder="시설명 또는 주소로 검색" class="facility-search-input">
                        <button type="button" id="facilitySearchBtn" class="facility-search-btn">
                            <span class="facility-search-icon">검색</span>
                        </button>
                    </div>
                </form>
            </div>


            <div class="facility-list-section">
                <div class="facility-list-header">
                    <span class="facility-count">0개</span>
                    <div class="facility-sort">
                        <button class="facility-sort-btn">평가등급순</button>
                        <button class="facility-sort-btn">가나다순</button>
                        <button class="facility-sort-btn">조회순</button>
                        <button class="facility-sort-btn">최신순</button>
                    </div>
                </div>

                <ul class="facility-list" id="facilityList">
                </ul>

                <div id="facilityPagination"></div>
            </div>
        </div>
</main>

<div th:replace="footer :: footer"></div>

<!-- 비교 사이드바 -->
<div class="compare-sidebar" id="compareSidebar" style="display:none;">
    <div class="sidebar-header">
        <h3>시설비교 (<span id="compareCount">0</span>/3)</h3>
        <button class="close-btn" id="closeSidebar">×</button>
    </div>
    <div class="sidebar-content">
        <button class="clear-all-btn" id="clearAllBtn">시설 전체삭제</button>
        <div class="compare-list" id="compareList">
            <!-- 비교 시설들이 여기에 동적으로 추가됩니다 -->
        </div>
        <div class="sidebar-actions">
            <button class="add-facility-btn" id="addFacilityBtn">비교하러가기</button>
        </div>
    </div>
</div>

<!-- 접힌 사이드바 버튼 -->
<button class="collapsed-sidebar-btn" id="collapsedSidebarBtn" style="display:none;">
    <span>비교</span>
    <span id="collapsedCount">0</span>
</button>

<script th:inline="javascript">
    /*<![CDATA[*/
    var serverFacilityList = /*[[${facilityList}]]*/ [];
    window.addEventListener('DOMContentLoaded', function() {
        initializeFacilityData(serverFacilityList);
    });
    /*]]>*/
</script>

<script src="js/index.js" th:src="@{/js/index.js}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const sidebar = document.getElementById('compareSidebar');
        const closeBtn = document.getElementById('closeSidebar');
        const collapsedSidebarBtn = document.getElementById('collapsedSidebarBtn');

        // 닫기 버튼 클릭 시 사이드바 숨기고 접힌 버튼 표시
        closeBtn.addEventListener('click', function() {
            sidebar.style.display = 'none';
            collapsedSidebarBtn.style.display = 'block';
        });

        // 접힌 버튼 클릭 시 사이드바 다시 표시
        collapsedSidebarBtn.addEventListener('click', function() {
            sidebar.style.display = 'block';
            collapsedSidebarBtn.style.display = 'none';
        });
    });
</script>
</body>
</html>